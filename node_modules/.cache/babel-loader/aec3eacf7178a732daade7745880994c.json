{"ast":null,"code":"import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-0f701602\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = {\n  class: \"wrapper\"\n};\n\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"title\"\n}, \"我的订单\", -1\n/* HOISTED */\n));\n\nconst _hoisted_3 = {\n  class: \"orders\"\n};\nconst _hoisted_4 = {\n  class: \"order__title\"\n};\nconst _hoisted_5 = {\n  class: \"order__status\"\n};\nconst _hoisted_6 = {\n  class: \"order__content\"\n};\nconst _hoisted_7 = {\n  class: \"order__content__imgs\"\n};\nconst _hoisted_8 = [\"src\"];\nconst _hoisted_9 = {\n  class: \"order__content__info\"\n};\nconst _hoisted_10 = {\n  class: \"order__content__price\"\n};\nconst _hoisted_11 = {\n  class: \"order__content__count\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_FooTer = _resolveComponent(\"FooTer\");\n\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"div\", _hoisted_1, [_hoisted_2, _createElementVNode(\"div\", _hoisted_3, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.list, (item, index) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      class: \"order\",\n      key: index\n    }, [_createElementVNode(\"div\", _hoisted_4, [_createTextVNode(_toDisplayString(item.shopName) + \" \", 1\n    /* TEXT */\n    ), _createElementVNode(\"span\", _hoisted_5, _toDisplayString(item.isCanceled ? '已取消' : '已下单'), 1\n    /* TEXT */\n    )]), _createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"div\", _hoisted_7, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(item.products, (innerItem, innerIndex) => {\n      return _openBlock(), _createElementBlock(_Fragment, {\n        key: innerIndex\n      }, [innerIndex <= 3 ? (_openBlock(), _createElementBlock(\"img\", {\n        key: 0,\n        class: \"order__content__img\",\n        src: innerItem.product.img\n      }, null, 8\n      /* PROPS */\n      , _hoisted_8)) : _createCommentVNode(\"v-if\", true)], 64\n      /* STABLE_FRAGMENT */\n      );\n    }), 128\n    /* KEYED_FRAGMENT */\n    ))]), _createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"div\", _hoisted_10, \"¥ \" + _toDisplayString(item.totalPrice), 1\n    /* TEXT */\n    ), _createElementVNode(\"div\", _hoisted_11, \"共 \" + _toDisplayString(item.totalNumber) + \" 件\", 1\n    /* TEXT */\n    )])])]);\n  }), 128\n  /* KEYED_FRAGMENT */\n  ))])]), _createVNode(_component_FooTer, {\n    currentIndex: 2\n  })], 64\n  /* STABLE_FRAGMENT */\n  );\n}","map":{"version":3,"mappings":";;;;;EACOA,KAAK,EAAC;;;gEACTC,oBAA6B,KAA7B,EAA6B;EAAxBD,KAAK,EAAC;AAAkB,CAA7B,EAAmB,MAAnB,EAAuB;AAAA;AAAvB;;;EACKA,KAAK,EAAC;;;EAMFA,KAAK,EAAC;;;EAEHA,KAAK,EAAC;;;EAITA,KAAK,EAAC;;;EACJA,KAAK,EAAC;;;;EAYNA,KAAK,EAAC;;;EACJA,KAAK,EAAC;;;EACNA,KAAK,EAAC;;;;;6DA7BrBC,oBAkCM,KAlCN,cAkCM,CAjCJC,UAiCI,EAhCJD,oBA+BM,KA/BN,cA+BM,oBA9BJE,oBA6BMC,SA7BN,EA6BM,IA7BN,EA6BMC,YA3BmBC,WA2BnB,EA3BuB,CAAnBC,IAAmB,EAAdC,KAAc,KAAT;yBAFpBL,oBA6BM,KA7BN,EA6BM;MA5BJH,KAAK,EAAC,OA4BF;MA1BHS,GAAG,EAAED;IA0BF,CA7BN,GAKEP,oBAKM,KALN,cAKM,mCAJFM,IAAI,CAACG,YAAU,KACjB;IAAA;KAGI,EAHJT,oBAEO,MAFP,cAEOU,iBADHJ,IAAI,CAACK,UAAL,GAAe,KAAf,GAAe,KACZ,CAFP,EACmB;IAAA;IADnB,CAGI,CALN,GAMAX,oBAiBM,KAjBN,cAiBM,CAhBJA,oBAWM,KAXN,cAWM,oBAVJE,oBASWC,SATX,EASW,IATX,EASWC,YARwBE,IAAI,CAACM,QAQ7B,EARqC,CAAtCC,SAAsC,EAA5BC,UAA4B,KAAlB;;aACtBA;SAAU,CAKRA,UAAU,uBAHlBZ,oBAIE,KAJF,EAIE;cAAA;QAHAH,KAAK,EAAC,qBAGN;QAFCgB,GAAG,EAAEF,SAAS,CAACG,OAAV,CAAkBC;MAExB,CAJF;;MAAA,kDAFgB;;;KAOP,CATX;;IAAA,CAUI,EAXN,CAgBI,EAJJjB,oBAGM,KAHN,cAGM,CAFJA,oBAA8D,KAA9D,eAAmC,OAAEU,iBAAEJ,IAAI,CAACY,UAAP,CAArC,EAAsD;IAAA;IAAtD,CAEI,EADJlB,oBAAiE,KAAjE,eAAmC,OAAEU,iBAAEJ,IAAI,CAACa,WAAP,CAAF,GAAsB,IAAzD,EAA2D;IAAA;IAA3D,CACI,CAHN,CAII,CAjBN,EAXF;GA6BM,CA7BN;;EAAA,CA8BI,EA/BN,CAgCI,CAlCN,GAmCAC,aAA2BC,iBAA3B,EAA2B;IAAlBC,YAAY,EAAE;EAAI,CAA3B","names":["class","_createElementVNode","_hoisted_2","_createElementBlock","_Fragment","_renderList","$setup","item","index","key","shopName","_toDisplayString","isCanceled","products","innerItem","innerIndex","src","product","img","totalPrice","totalNumber","_createVNode","_component_FooTer","currentIndex"],"sourceRoot":"","sources":["D:\\StudySoft\\VSCode\\VSCodeFile\\CODE_前端projects\\fangjingdong-mall_project\\src\\views\\orderList\\OrderList.vue"],"sourcesContent":["<template>\r\n  <div class=\"wrapper\">\r\n    <div class=\"title\">我的订单</div>\r\n    <div class=\"orders\">\r\n      <div \r\n        class=\"order\"\r\n        v-for=\"(item,index) in list\"\r\n        :key=\"index\"\r\n      >\r\n        <div class=\"order__title\">\r\n          {{item.shopName}}\r\n          <span class=\"order__status\">\r\n            {{item.isCanceled ? '已取消' : '已下单'}}\r\n          </span>\r\n        </div>\r\n        <div class=\"order__content\">\r\n          <div class=\"order__content__imgs\">\r\n            <template\r\n              v-for=\"(innerItem,innerIndex) in item.products\"\r\n              :key=\"innerIndex\"\r\n            >\r\n              <img \r\n                class=\"order__content__img\"\r\n                :src=\"innerItem.product.img\"\r\n                v-if=\"innerIndex<=3\"\r\n              />\r\n            </template>\r\n          </div>\r\n          <div class=\"order__content__info\">\r\n            <div class=\"order__content__price\">¥ {{item.totalPrice}}</div>\r\n            <div class=\"order__content__count\">共 {{item.totalNumber}} 件</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <FooTer :currentIndex=\"2\"/>\r\n</template>\r\n\r\n<script>\r\nimport FooTer from '../../components/FooTer';\r\nimport { reactive, toRefs } from 'vue'\r\nimport { get } from '../../utils/request'\r\n\r\n// 处理订单列表逻辑\r\nconst useOrderListEffect = () => {\r\n  const data = reactive({ list:[]})\r\n  const getNearbyList = async () => {\r\n    const result = await get('/api/order')\r\n    if (result?.errno === 0 && result?.data?.length) {\r\n      const orderList = result.data\r\n      orderList.forEach((order) => {\r\n        const products = order.products || []\r\n        let totalPrice = 0\r\n        let totalNumber = 0\r\n        products.forEach((productItem) => {\r\n          totalNumber += (productItem?.orderSales || 0)\r\n          totalPrice += ((productItem?.product?.price * productItem?.orderSales) || 0)\r\n        })\r\n        order.totalPrice = totalPrice\r\n        order.totalNumber = totalNumber\r\n      })\r\n      data.list = result.data\r\n    }\r\n  }\r\n  getNearbyList()\r\n  const { list } = toRefs(data)\r\n  return { list }\r\n}\r\n\r\nexport default {\r\n    name:'OrderList',\r\n    components:{FooTer},\r\n    setup(){\r\n      const { list } = useOrderListEffect()\r\n      return { list }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '../../style/viriables.scss';\r\n.wrapper {\r\n  overflow-y: auto;\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  bottom: .5rem;\r\n  right: 0;\r\n  background: $dark-bgColor;\r\n}\r\n.title {\r\n  line-height: .44rem;\r\n  background: $bgColor;\r\n  font-size: .16rem;\r\n  color: $content-fontcolor;\r\n  text-align: center;\r\n}\r\n.order {\r\n  margin: .16rem .18rem;\r\n  padding: .16rem;\r\n  background: $bgColor;\r\n  &__title {\r\n    margin-bottom: .16rem;\r\n    line-height: .22rem;\r\n    font-size: .16rem;\r\n    color: $content-fontcolor;\r\n  }\r\n  &__status {\r\n    float: right;\r\n    font-size: .14rem;\r\n    color: $light-fontColor;\r\n  }\r\n  &__content {\r\n    display: flex;\r\n    &__imgs {\r\n      flex: 1;\r\n    }\r\n    &__img {\r\n      width: .4rem;\r\n      height: .4rem;\r\n      margin-right: .12rem;\r\n    }\r\n    &__info {\r\n      width: .7rem;\r\n    }\r\n    &__price {\r\n      margin-bottom: .04rem;\r\n      line-height: .2rem;\r\n      font-size: .14rem;\r\n      color: $hightlight-fontColor;\r\n      text-align: right;\r\n    }\r\n    &__count {\r\n      line-height: .14rem;\r\n      font-size: .12rem;\r\n      color: $content-fontcolor;\r\n      text-align: right;\r\n    }\r\n  }\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}