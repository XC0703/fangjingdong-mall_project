{"ast":null,"code":"import FooTer from '../../components/FooTer';\nimport { reactive, toRefs } from 'vue';\nimport { get } from '../../utils/request'; // 处理订单列表逻辑\n\nconst useOrderListEffect = () => {\n  const data = reactive({\n    list: []\n  });\n\n  const getNearbyList = async () => {\n    const result = await get('/api/order');\n\n    if (result?.errno === 0 && result?.data?.length) {\n      const orderList = result.data;\n      orderList.forEach(order => {\n        const products = order.products || [];\n        let totalPrice = 0;\n        let totalNumber = 0;\n        products.forEach(productItem => {\n          totalNumber += productItem?.orderSales || 0;\n          totalPrice += productItem?.product?.price * productItem?.orderSales || 0;\n        });\n        order.totalPrice = totalPrice;\n        order.totalNumber = totalNumber;\n      });\n      data.list = result.data;\n    }\n  };\n\n  getNearbyList();\n  const {\n    list\n  } = toRefs(data);\n  return {\n    list\n  };\n};\n\nexport default {\n  name: 'OrderList',\n  components: {\n    FooTer\n  },\n\n  setup() {\n    const {\n      list\n    } = useOrderListEffect();\n    return {\n      list\n    };\n  }\n\n};","map":{"version":3,"mappings":"AAwCA,OAAOA,MAAP,MAAmB,yBAAnB;AACA,SAASC,QAAT,EAAmBC,MAAnB,QAAiC,KAAjC;AACA,SAASC,GAAT,QAAoB,qBAApB,C,CAEA;;AACA,MAAMC,kBAAiB,GAAI,MAAM;EAC/B,MAAMC,IAAG,GAAIJ,QAAQ,CAAC;IAAEK,IAAI,EAAC;EAAP,CAAD,CAArB;;EACA,MAAMC,aAAY,GAAI,YAAY;IAChC,MAAMC,MAAK,GAAI,MAAML,GAAG,CAAC,YAAD,CAAxB;;IACA,IAAIK,MAAM,EAAEC,KAAR,KAAkB,CAAlB,IAAuBD,MAAM,EAAEH,IAAR,EAAcK,MAAzC,EAAiD;MAC/C,MAAMC,SAAQ,GAAIH,MAAM,CAACH,IAAzB;MACAM,SAAS,CAACC,OAAV,CAAmBC,KAAD,IAAW;QAC3B,MAAMC,QAAO,GAAID,KAAK,CAACC,QAAN,IAAkB,EAAnC;QACA,IAAIC,UAAS,GAAI,CAAjB;QACA,IAAIC,WAAU,GAAI,CAAlB;QACAF,QAAQ,CAACF,OAAT,CAAkBK,WAAD,IAAiB;UAChCD,WAAU,IAAMC,WAAW,EAAEC,UAAb,IAA2B,CAA3C;UACAH,UAAS,IAAOE,WAAW,EAAEE,OAAb,EAAsBC,KAAtB,GAA8BH,WAAW,EAAEC,UAA5C,IAA2D,CAA1E;QACD,CAHD;QAIAL,KAAK,CAACE,UAAN,GAAmBA,UAAnB;QACAF,KAAK,CAACG,WAAN,GAAoBA,WAApB;MACD,CAVD;MAWAX,IAAI,CAACC,IAAL,GAAYE,MAAM,CAACH,IAAnB;IACF;EACF,CAjBA;;EAkBAE,aAAa;EACb,MAAM;IAAED;EAAF,IAAWJ,MAAM,CAACG,IAAD,CAAvB;EACA,OAAO;IAAEC;EAAF,CAAP;AACF,CAvBA;;AAyBA,eAAe;EACXe,IAAI,EAAC,WADM;EAEXC,UAAU,EAAC;IAACtB;EAAD,CAFA;;EAGXuB,KAAK,GAAE;IACL,MAAM;MAAEjB;IAAF,IAAWF,kBAAkB,EAAnC;IACA,OAAO;MAAEE;IAAF,CAAP;EACF;;AANW,CAAf","names":["FooTer","reactive","toRefs","get","useOrderListEffect","data","list","getNearbyList","result","errno","length","orderList","forEach","order","products","totalPrice","totalNumber","productItem","orderSales","product","price","name","components","setup"],"sourceRoot":"","sources":["D:\\StudySoft\\VSCode\\VSCodeFile\\CODE_前端projects\\fangjingdong-mall_project\\src\\views\\orderList\\OrderList.vue"],"sourcesContent":["<template>\r\n  <div class=\"wrapper\">\r\n    <div class=\"title\">我的订单</div>\r\n    <div class=\"orders\">\r\n      <div \r\n        class=\"order\"\r\n        v-for=\"(item,index) in list\"\r\n        :key=\"index\"\r\n      >\r\n        <div class=\"order__title\">\r\n          {{item.shopName}}\r\n          <span class=\"order__status\">\r\n            {{item.isCanceled ? '已取消' : '已下单'}}\r\n          </span>\r\n        </div>\r\n        <div class=\"order__content\">\r\n          <div class=\"order__content__imgs\">\r\n            <template\r\n              v-for=\"(innerItem,innerIndex) in item.products\"\r\n              :key=\"innerIndex\"\r\n            >\r\n              <img \r\n                class=\"order__content__img\"\r\n                :src=\"innerItem.product.img\"\r\n                v-if=\"innerIndex<=3\"\r\n              />\r\n            </template>\r\n          </div>\r\n          <div class=\"order__content__info\">\r\n            <div class=\"order__content__price\">¥ 111</div>\r\n            <div class=\"order__content__count\">共 111 件</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <FooTer :currentIndex=\"2\"/>\r\n</template>\r\n\r\n<script>\r\nimport FooTer from '../../components/FooTer';\r\nimport { reactive, toRefs } from 'vue'\r\nimport { get } from '../../utils/request'\r\n\r\n// 处理订单列表逻辑\r\nconst useOrderListEffect = () => {\r\n  const data = reactive({ list:[]})\r\n  const getNearbyList = async () => {\r\n    const result = await get('/api/order')\r\n    if (result?.errno === 0 && result?.data?.length) {\r\n      const orderList = result.data\r\n      orderList.forEach((order) => {\r\n        const products = order.products || []\r\n        let totalPrice = 0\r\n        let totalNumber = 0\r\n        products.forEach((productItem) => {\r\n          totalNumber += (productItem?.orderSales || 0)\r\n          totalPrice += ((productItem?.product?.price * productItem?.orderSales) || 0)\r\n        })\r\n        order.totalPrice = totalPrice\r\n        order.totalNumber = totalNumber\r\n      })\r\n      data.list = result.data\r\n    }\r\n  }\r\n  getNearbyList()\r\n  const { list } = toRefs(data)\r\n  return { list }\r\n}\r\n\r\nexport default {\r\n    name:'OrderList',\r\n    components:{FooTer},\r\n    setup(){\r\n      const { list } = useOrderListEffect()\r\n      return { list }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '../../style/viriables.scss';\r\n.wrapper {\r\n  overflow-y: auto;\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  bottom: .5rem;\r\n  right: 0;\r\n  background: $dark-bgColor;\r\n}\r\n.title {\r\n  line-height: .44rem;\r\n  background: $bgColor;\r\n  font-size: .16rem;\r\n  color: $content-fontcolor;\r\n  text-align: center;\r\n}\r\n.order {\r\n  margin: .16rem .18rem;\r\n  padding: .16rem;\r\n  background: $bgColor;\r\n  &__title {\r\n    margin-bottom: .16rem;\r\n    line-height: .22rem;\r\n    font-size: .16rem;\r\n    color: $content-fontcolor;\r\n  }\r\n  &__status {\r\n    float: right;\r\n    font-size: .14rem;\r\n    color: $light-fontColor;\r\n  }\r\n  &__content {\r\n    display: flex;\r\n    &__imgs {\r\n      flex: 1;\r\n    }\r\n    &__img {\r\n      width: .4rem;\r\n      height: .4rem;\r\n      margin-right: .12rem;\r\n    }\r\n    &__info {\r\n      width: .7rem;\r\n    }\r\n    &__price {\r\n      margin-bottom: .04rem;\r\n      line-height: .2rem;\r\n      font-size: .14rem;\r\n      color: $hightlight-fontColor;\r\n      text-align: right;\r\n    }\r\n    &__count {\r\n      line-height: .14rem;\r\n      font-size: .12rem;\r\n      color: $content-fontcolor;\r\n      text-align: right;\r\n    }\r\n  }\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}